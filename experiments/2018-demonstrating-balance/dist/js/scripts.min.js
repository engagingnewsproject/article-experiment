$(document).ready(function(){}),$(document).ready(function(){function r(e,t,n){var o=new XMLHttpRequest;o.open("POST","../../inc/class.log.php"),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onload=function(){200===o.status||200!==o.status&&alert("Request failed.  Returned status of "+o.status)},o.send(encodeURI("log=true&identifier="+studyID+"&user_id="+userID+"&action="+e+"&comment="+n+"&label="+t+"&url="+window.location.href))}function o(e,t){r("click",e,t)}$(document).on("click","a",function(e){var t;if(e.preventDefault(),url=$(this).attr("href"),linkText=(t=$(this).text(),t=(t=(t=$.trim(t)).replace(/\r?\n|\r/g," ")).replace(/\s\s\s/g,"")),$(this).data("position")&&(linkText=$(this).data("position")+": "+linkText),$(this).hasClass("prev-article")){var n=JSON.parse(sessionStorage.getItem("history"));url=window.location.origin+n[n.length-2],n=n.slice(0,n.length-2),sessionStorage.setItem("history",JSON.stringify(n))}parent.postMessage(JSON.stringify({action:"pageClick"}),"*"),o("Link: "+linkText,url),window.location.href=url}),$(document).on("click",".social-share__item button",function(e){e.preventDefault(),o("Button: "+$(this).data("social"),$(this).data("position")),alert("Thanks for being willing to share this article, but for the purposes of this study, we have disabled the share function.")}),r("Page View",pageTitle,"Loaded"),sessionStorage.getItem("history")||sessionStorage.setItem("history","[]");var e=JSON.parse(sessionStorage.getItem("history"));if(0!==e.length&&e[e.length-1]===window.location.pathname||(e.push(window.location.pathname),sessionStorage.setItem("history",JSON.stringify(e))),2<=e.length){var t='<a class="prev-article" href="#"><svg class="icon icon--arrow_back"><use xlink:href="#arrow_back"></use></svg> Go Back to Previous Article</a>';$("#content").prepend(t),$(".social-share--bottom").before(t)}$("#submit-comment").click(function(e){var t,n,o=$("#commenter-name").val(),s=$("#commenter-comment").val(),a=(pageTitle,userID);0<o.length&&0<s.length?(t=o,n=s,$(".new-comment").replaceWith('<div class="alert alert-success">Thanks for your comment!</div>'),r("Comment","Add Comment",t+": "+n),ga("send","event","Comments","Add Comment",a)):($(".alert-error").remove(),$(".new-comment").append("<div class='alert alert-error'>* Please enter your name and a comment.</div>"),r("Comment","Add Comment","Add Comment Error"),ga("send","event","Comments","Add Comment Error",a)),e.preventDefault()}),window.addEventListener("message",function(e){-1!=["https://localhost:3000","https://demonstrating-balance.test","https://thenewsbeat.org","https://stroudresearch.net","https://mediaengagement.org","https://utexas.ca1.qualtrics.com"].indexOf(e.origin)?console.log("child message recieved",e):console.error("postMessage from "+e.origin+" not allowed")},!1)});